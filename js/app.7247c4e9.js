(function(e){function t(t){for(var n,i,o=t[0],l=t[1],c=t[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,o=1;o<a.length;o++){var l=a[o];0!==r[l]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={app:0},s=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/OpenRA-replay-analytics/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"01f7":function(e,t,a){},"0384":function(e,t,a){},"06a0":function(e,t,a){},"07a7":function(e,t,a){},"0ce6":function(e,t,a){},3142:function(e,t,a){"use strict";var n=a("9b67"),r=a.n(n);r.a},"3bea":function(e,t,a){},"3ded":function(e,t,a){"use strict";var n=a("4db8"),r=a.n(n);r.a},4678:function(e,t,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id="4678"},"4db8":function(e,t,a){},"53d7":function(e,t,a){"use strict";var n=a("01f7"),r=a.n(n);r.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=a("5f5b"),s=a("2ead"),i=a.n(s),o=a("2f62"),l=(a("4de4"),a("ac1f"),a("5319"),{appName:"OpenRA Replay Analytics",currentTab:null,currentMod:null,iconUrl:"assets/mods/ra/icon.png",isInputDisabled:!1,isLoading:!1,isAnalyticsReady:!1,timelineScalingFactor:.005,buildOrderViewMode:"simple",buildOrderFilter:"all",chatFilter:["all"]}),c={timelineSize:function(e,t,a){return a.replayData.game.duration.msec*e.timelineScalingFactor}},u={},d={setAnalyticsReadyState:function(e,t){e.isAnalyticsReady=t},setInputDisabledState:function(e,t){e.isInputDisabled=t},setLoadingState:function(e,t){e.isLoading=t,e.isInputDisabled=t},setCurrentTab:function(e,t){e.currentTab=t},setCurrentMod:function(e,t){e.currentMod=t;var a=t||"ra";e.iconUrl=e.iconUrl.replace(/(mods\/).+(\/)/,"$1"+a+"$2")},setBuildOrderViewMode:function(e,t){e.buildOrderViewMode=t.mode},setBuildOrderFilter:function(e,t){e.buildOrderFilter=t.filter},setChatFilter:function(e,t){e.chatFilter=t.filter}},p={namespaced:!0,state:l,getters:c,actions:u,mutations:d},m=(a("b0c0"),a("2ef0")),f=a.n(m),h=a("66d0"),b=a("fb90"),y=a("956c"),g=a("7c50"),_=a("9dc7"),v={default:h,cnc:b,ra:y,d2k:g,ts:_},j={modName:function(e,t,a){return function(t){return t=t?t.toLowerCase():a.replayData.mod,Object.prototype.hasOwnProperty.call(e,t)&&Object.prototype.hasOwnProperty.call(e[t],"name")?e[t].name:t}},modFeatures:function(e,t,a){return function(t){t=t?t.toLowerCase():a.replayData.mod;var n=[];return Object.prototype.hasOwnProperty.call(e,t)&&Object.prototype.hasOwnProperty.call(e[t],"features")&&(n=e[t].features),n}},factionInfo:function(e,t,a){return function(t,n){return t=t.toLowerCase(),n=n?n.toLowerCase():a.replayData.mod,Object.prototype.hasOwnProperty.call(e,n)&&Object.prototype.hasOwnProperty.call(e[n],"factions")?Object.prototype.hasOwnProperty.call(e[n].factions,t)?e[n].factions[t]:{id:t,name:t}:null}},actorInfo:function(e,t,a){return function(t,n){return t=t.toLowerCase(),n=n?n.toLowerCase():a.replayData.mod,Object.prototype.hasOwnProperty.call(e,n)&&Object.prototype.hasOwnProperty.call(e[n],"actors")?Object.prototype.hasOwnProperty.call(e[n].actors,t)?e[n].actors[t]:{id:t,name:t,type:"unknown"}:null}},supportPowerInfo:function(e,t,a){return function(t,n){return t=t.toLowerCase(),n=n?n.toLowerCase():a.replayData.mod,Object.prototype.hasOwnProperty.call(e,n)&&Object.prototype.hasOwnProperty.call(e[n],"support_powers")?Object.prototype.hasOwnProperty.call(e[n].support_powers,t)?e[n].support_powers[t]:{id:t,name:t,type:"unknown"}:null}},buildings:function(e,t,a){var n=a.replayData.mod;return f.a.filter(e[n].actors,["type","building"])},defences:function(e,t,a){var n=a.replayData.mod;return f.a.filter(e[n].actors,["type","defence"])},support_powers:function(e,t,a){var n=a.replayData.mod;return f.a.filter(e[n].support_powers,["type","support_power"])}},w={},O={},S={namespaced:!0,state:v,getters:j,actions:w,mutations:O};n["default"].use(o["a"]);var C=!1,k=new o["a"].Store({modules:{settings:p,modData:S},strict:C}),D=a("8c4f"),$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("HeaderDefault"),a("Input")],1)},x=[],E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-jumbotron",[a("div",{staticClass:"c-header-default"},[a("h1",{staticClass:"display-4"},[e._v("Greetings, Commander!")]),a("p",{staticClass:"lead"},[e._v("This is a visualization tool for data extracted from "),a("a",{attrs:{href:"http://openra.net/"}},[e._v("OpenRA")]),e._v(" replay files using "),a("a",{attrs:{href:"https://github.com/AMHOL/openra-ruby"}},[e._v("openra-ruby")]),e._v(".")])])])},R=[],T={created:function(){document.title="".concat(this.$store.state.settings.appName)}},F=T,I=(a("6e63"),a("2877")),M=Object(I["a"])(F,E,R,!1,null,null,null),N=M.exports,A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-tabs",{attrs:{card:""},on:{input:e.onTabActivated}},[a("b-tab",{attrs:{title:"Upload Replay",disabled:e.isInputDisabled&&0!==e.currentTab}},[a("ReplayFileInput")],1),a("b-tab",{attrs:{title:"ORA Ladder & RAGL",disabled:e.isInputDisabled&&1!==e.currentTab}},[a("ReplayHashInput")],1),a("b-tab",{attrs:{title:"Paste JSON",disabled:e.isInputDisabled&&2!==e.currentTab}},[a("ReplayDataInput")],1),a("b-tab",{attrs:{title:"Stored Replays",disabled:e.isInputDisabled&&3!==e.currentTab}},[a("StoredReplays")],1)],1)},L=[],P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-row",[a("b-col",{attrs:{lg:"7"}},[a("b-form",{on:{submit:function(t){return e.onSubmit(t)}}},[a("b-alert",{attrs:{variant:"danger",dismissible:"",show:e.hasError}},[e._v(" "+e._s(e.errorMessage)+" ")]),a("fieldset",{attrs:{disabled:e.isInputDisabled}},[a("b-form-group",{attrs:{label:"Replay JSON","label-for":"input-replay-json"}},[a("b-form-textarea",{attrs:{id:"input-replay-json",name:"replay-data",rows:8,"max-rows":8,required:"",state:e.isValid},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}}),a("small",{staticClass:"form-text text-muted"},[e._v(" Paste the JSON output of "),a("strong",[e._v("openra-ruby")]),e._v(" or "),a("a",{attrs:{href:"data/sample/ra-1v1-sample.json"},on:{click:function(t){return e.loadSampleReplay(t)}}},[e._v("load a sample 1v1 game")]),e._v(". ")])],1),a("Submit")],1)],1)],1)],1)},z=[],B=(a("99af"),a("d3b7"),new n["default"]),V=(a("d81d"),{mergeActors:function(e,t){var a=[].concat(e,t);return a=f.a.sortBy(a,[function(e){return e.game_time.msec}]),a=a.map((function(e){return Object.prototype.hasOwnProperty.call(e,"structure")?(e.actor_id=e.structure,e.actor_type="build"):Object.prototype.hasOwnProperty.call(e,"type")&&(e.actor_id=e.type,e.actor_type="support_power"),e})),a},getClientTeam:function(e){var t;return t=!e.team&&e.is_player?"ffa":e.team||e.is_player?e.team:"spectators",t},cleanUpBuild:function(e){if(e.game.options.cheats_enabled)return e;var t=300;return f.a.each(e.clients,(function(a,n){var r,s;f.a.reverse(a.build);var i=f.a.filter(a.build,(function(e){return!(e.structure===r&&e.game_time.msec+t>=s)&&(r=e.structure,s=e.game_time.msec,!0)}));f.a.reverse(a.build),e.clients[n].build=i})),e}}),J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-btn",{attrs:{type:"submit",variant:"primary",disabled:e.isInputDisabled},on:{click:e.onClick}},[e._v(" "+e._s(e.isLoading?this.loadingLabel:this.defaultLabel)+" "),a("Spinner",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}]})],1),e.isTakingTooLong&&e.isLoading?a("small",{staticClass:"d-block mt-2 text-muted"},[e._v(" Please be patient, large replays may take several minutes to process. ")]):e._e()],1)},U=[],G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"c-spinner"},[a("img",{staticClass:"c-spinner__img",attrs:{src:e.spinnerUrl,alt:""}})])},H=[],W={computed:{spinnerUrl:function(){return"./assets/spinner.webp"}}},X=W,Y=(a("ef72"),Object(I["a"])(X,G,H,!1,null,null,null)),q=Y.exports,K={components:{Spinner:q},props:{isButton:{type:Boolean,default:!0},defaultLabel:{type:String,default:"Submit"}},data:function(){return{isTakingTooLong:!1,delay:5e3,loadingLabel:"Submit"}},computed:{isLoading:function(){return this.$store.state.settings.isLoading},isInputDisabled:function(){return!this.isButton||this.$store.state.settings.isInputDisabled}},methods:{onClick:function(){this.resetState(),setTimeout(this.updateLabel,0,Date.now())},resetState:function(){this.loadingLabel=this.defaultLabel,this.isTakingTooLong=!1},updateLabel:function(e){if(this.isLoading){var t=Date.now()-e;t>=4*this.delay?this.isTakingTooLong=!0:(t>=3*this.delay?this.loadingLabel="Engineering...":t>=2*this.delay?this.loadingLabel="Examining diagrams...":t>=this.delay?this.loadingLabel="Studying blue prints...":this.loadingLabel="Analyzing schematics...",setTimeout(this.updateLabel,this.delay,e))}else this.resetState()}},mounted:function(){this.isButton||this.onClick()}},Q=K,Z=Object(I["a"])(Q,J,U,!1,null,null,null),ee=Z.exports,te={components:{Submit:ee},data:function(){return{isValid:null,hasError:!1,errorMessage:null,input:null,replayJSON:null}},computed:{isInputDisabled:function(){return this.$store.state.settings.isInputDisabled}},methods:{loadSampleReplay:function(e){var t=this;e.preventDefault(),this.isInputDisabled||(this.$store.commit("settings/setInputDisabledState",!0),fetch(e.target.getAttribute("href")).then((function(e){if(e.ok)return e.text();throw new Error("Failed to fetch sample replay data.")})).then((function(e){t.input=e,t.$store.commit("settings/setInputDisabledState",!1)})).catch((function(e){t.setError(e),t.$store.commit("settings/setInputDisabledState",!1)})))},onSubmit:function(e){var t=this;e.preventDefault(),this.isInputDisabled||(this.clearError(),this.input&&(this.$store.commit("settings/setLoadingState",!0),setTimeout((function(){try{t.replayJSON=V.cleanUpBuild(JSON.parse(t.input)),t.replayDataReady()}catch(e){t.setError(e),t.$store.commit("settings/setLoadingState",!1)}}),0)))},replayDataReady:function(){B.$emit("ReplayDataReady",this.replayJSON),this.$storageManager.storeReplay(this.replayJSON)},setError:function(e){this.isValid=!1,this.hasError=!0,this.errorMessage="".concat(e.name,": ").concat(e.message)},clearError:function(){this.isValid=null,this.hasError=!1,this.errorMessage=null}}},ae=te,ne=Object(I["a"])(ae,P,z,!1,null,null,null),re=ne.exports,se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-row",[a("b-col",{attrs:{lg:"7"}},[a("b-form",{on:{submit:function(t){return e.onSubmit(t)}}},[a("b-alert",{attrs:{variant:"danger",dismissible:"",show:e.hasError}},[e._v(" "+e._s(e.errorMessage)+" ")]),a("fieldset",{attrs:{disabled:e.isInputDisabled}},[a("b-form-group",{attrs:{label:"Replay file","label-for":"input-replay-file"}},[a("b-form-file",{attrs:{id:"input-replay-file",accept:".orarep"},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}}),a("small",{staticClass:"form-text text-muted"},[e._v(" Choose or drag and drop an "),a("strong",[e._v(".orarep")]),e._v(" file. ")])],1),a("Submit")],1)],1)],1)],1)},ie=[],oe={components:{Submit:ee},data:function(){return{hasError:!1,errorMessage:null,file:null,replayJSON:null}},computed:{isInputDisabled:function(){return this.$store.state.settings.isInputDisabled}},methods:{onSubmit:function(e){var t=this;if(e.preventDefault(),!this.isInputDisabled&&(this.clearError(),this.file)){this.$store.commit("settings/setLoadingState",!0);var a=new FormData(e.target);a.append("data",this.file),setTimeout((function(){fetch("https://openra-api.com/replays/data",{method:"POST",body:a}).then((function(e){return e.json()})).then((function(e){t.replayJSON=V.cleanUpBuild(e),t.replayDataReady()})).catch((function(e){t.setError(e),t.$store.commit("settings/setLoadingState",!1)}))}),0)}},replayDataReady:function(){B.$emit("ReplayDataReady",this.replayJSON),this.$storageManager.storeReplay(this.replayJSON)},setError:function(e){this.hasError=!0,this.errorMessage="".concat(e.name,": ").concat(e.message)},clearError:function(){this.hasError=!1,this.errorMessage=null}}},le=oe,ce=Object(I["a"])(le,se,ie,!1,null,null,null),ue=ce.exports,de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-row",[a("b-col",{attrs:{lg:"7"}},[a("b-form",{on:{submit:function(t){return e.onSubmit(t)}}},[a("b-alert",{attrs:{variant:"danger",dismissible:"",show:e.hasError}},[e._v(" "+e._s(e.errorMessage)+" ")]),a("fieldset",{attrs:{disabled:e.isInputDisabled}},[a("b-form-group",{attrs:{label:"Replay hash","label-for":"input-replay-hash"}},[a("b-form-input",{attrs:{id:"input-replay-hash",type:"text",name:"hash",required:"",state:e.isValid},model:{value:e.hash,callback:function(t){e.hash=t},expression:"hash"}}),a("small",{staticClass:"form-text text-muted"},[e._v(" Paste the "),a("strong",[e._v("replay hash")]),e._v(" from "),a("a",{attrs:{href:"http://oraladder.net/"}},[e._v("ORALadder")]),e._v(" or "),a("a",{attrs:{href:"http://ragl.org/"}},[e._v("RAGL")]),e._v(". ")])],1),a("b-form-group",{attrs:{label:"Source","label-for":"input-replay-hash-source"}},[a("b-form-radio-group",{attrs:{id:"input-replay-hash-source",name:"input-replay-hash-source"},model:{value:e.source,callback:function(t){e.source=t},expression:"source"}},[a("b-form-radio",{attrs:{value:"oraladder"}},[e._v("ORA Ladder")]),a("b-form-radio",{attrs:{value:"ragl"}},[e._v("RAGL")])],1)],1),a("Submit")],1)],1)],1)],1)},pe=[],me={components:{Submit:ee},data:function(){return{isValid:null,hasError:!1,errorMessage:null,hash:null,source:"oraladder",replayJSON:null}},computed:{isInputDisabled:function(){return this.$store.state.settings.isInputDisabled}},methods:{onSubmit:function(e){var t=this;e.preventDefault(),this.isInputDisabled||(this.clearError(),this.hash&&(this.$store.commit("settings/setLoadingState",!0),setTimeout((function(){fetch("".concat("https://openra-api.com/replays/data","/").concat(t.source,"/").concat(t.hash)).then((function(e){if(e.ok)return e.json();throw new Error("Failed to fetch data from openra-api.com (".concat(e.status," ").concat(e.statusText,")"))})).then((function(e){t.replayJSON=V.cleanUpBuild(e),t.replayDataReady()})).catch((function(e){t.setError(e),t.$store.commit("settings/setLoadingState",!1)}))}),0)))},replayDataReady:function(){B.$emit("ReplayDataReady",this.replayJSON),this.$storageManager.storeReplay(this.replayJSON)},setError:function(e){this.isValid=!1,this.hasError=!0,this.errorMessage="".concat(e.name,": ").concat(e.message)},clearError:function(){this.isValid=null,this.hasError=!1,this.errorMessage=null}}},fe=me,he=Object(I["a"])(fe,de,pe,!1,null,null,null),be=he.exports,ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-stored-replays",class:{"is-input-disabled":e.isInputDisabled}},[a("b-row",[a("b-col",{attrs:{sm:"5",md:"6"}},[a("h3",{staticClass:"h3"},[e._v("Stored Replays ("+e._s(e.storedReplays.length)+")")]),e.hasStored?e._e():a("p",{staticClass:"text-muted"},[e._v(" You don't have any replays. Go ahead and sumbit some! ")])]),a("b-col",{attrs:{sm:"5",md:"6"}},[e.hasStored?a("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter","label-cols-sm":"3","label-align-sm":"right","label-size":"sm","label-for":"filterInput"}},[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Type to Search",debounce:"500"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),a("b-input-group-append",[a("b-button",{attrs:{disabled:!e.filter},on:{click:function(t){e.filter=""}}},[e._v("Clear")])],1)],1)],1):e._e()],1)],1),a("b-alert",{attrs:{variant:"danger",dismissible:"",show:e.hasError}},[e._v(" "+e._s(e.errorMessage)+" ")]),e.hasStored?a("b-table",{attrs:{hover:"",items:e.storedReplays,fields:e.fields,filter:e.filter},on:{"row-clicked":function(t){return e.loadReplay(t)}},scopedSlots:e._u([{key:"cell(gameInfo)",fn:function(t){return[a("h4",{staticClass:"h5"},[e._v(e._s(t.item.versus))]),a("span",[e._v('on "'+e._s(t.item.data.map.name)+'" in '+e._s(t.item.modName))])]}},{key:"cell(duration)",fn:function(t){return[a("time",{attrs:{title:t.item.data.game.duration.formatted}},[e._v(" "+e._s(e._f("duration")(t.item.data.game.duration.msec,"humanize"))+" ")])]}},{key:"cell(timestamp)",fn:function(t){return[e._v(" "+e._s(e._f("moment")(t.item.timestamp,"from","now"))+" ")]}},{key:"cell(actions)",fn:function(t){return[a("b-button",{attrs:{variant:"outline-primary",size:"sm",id:t.index},on:{click:function(t){return e.onDeleteClicked(t)}}},[e._v(" Delete ")])]}}],null,!1,3692934823)}):e._e()],1)},ge=[],_e={data:function(){return{storedReplays:[],fields:[{key:"gameInfo",label:"Game Info"},{key:"duration",label:"Duration",sortable:!0},{key:"timestamp",label:"Added",sortable:!0},{key:"actions",label:"Actions"}],replayJSON:null,hasError:!1,errorMessage:null,filter:null}},computed:{hasStored:function(){return this.storedReplays.length>0},isInputDisabled:function(){return this.$store.state.settings.isInputDisabled}},methods:{onDeleteClicked:function(e){e.preventDefault(),this.$storageManager.deleteReplay(e.target.id)},loadReplay:function(e){if(!this.isInputDisabled){this.clearError(),this.$store.commit("settings/setLoadingState",!0);try{if(!e.data)throw new Error("Failed to load stored replay data.");this.replayJSON=e.data,this.replayDataReady()}catch(e){this.setError(e),this.$store.commit("settings/setLoadingState",!1)}}},replayDataReady:function(){B.$emit("ReplayDataReady",this.replayJSON)},setError:function(e){this.hasError=!0,this.errorMessage="".concat(e.name,": ").concat(e.message)},clearError:function(){this.hasError=!1,this.errorMessage=null}},created:function(){this.storedReplays=this.$storageManager.storedReplays}},ve=_e,je=(a("8837"),Object(I["a"])(ve,ye,ge,!1,null,null,null)),we=je.exports,Oe={components:{ReplayDataInput:re,ReplayFileInput:ue,ReplayHashInput:be,StoredReplays:we},data:function(){return{currentTab:null}},computed:{isInputDisabled:function(){return this.$store.state.settings.isInputDisabled}},methods:{onTabActivated:function(e){this.currentTab=e}}},Se=Oe,Ce=Object(I["a"])(Se,A,L,!1,null,null,null),ke=Ce.exports,De={components:{HeaderDefault:N,Input:ke}},$e=De,xe=Object(I["a"])($e,$,x,!1,null,null,null),Ee=xe.exports,Re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Header"),a("Analytics")],1)},Te=[],Fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-tabs",{attrs:{card:""},on:{input:e.onTabActivated}},[a("b-tab",{attrs:{title:"Game Info",active:""}},[a("TabGameInfo")],1),a("b-tab",{attrs:{title:"Clients"}},[a("TabClients")],1),a("b-tab",{attrs:{title:"Build Orders & Powers"}},[a("TabBuildOrders")],1),a("b-tab",{attrs:{title:"Chat"}},[a("TabChat")],1)],1)},Ie=[],Me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-tab-game-info row"},[a("dl",{staticClass:"col-sm"},[a("dt",[e._v("Mod")]),a("dd",[a("ModName"),e._v(" ("+e._s(e.replayData.version)+") ")],1),a("dt",[e._v("Map")]),a("dd",[e._v(" "+e._s(e.replayData.map.name)+" "),a("MapInfo",{attrs:{hash:e.replayData.map.hash}})],1),a("dt",[e._v("Game type")]),a("dd",[e._v(e._s(e.replayData.game.type))]),a("dt",[e._v("Duration")]),a("dd",[e._v(e._s(e._f("duration")(e.replayData.game.duration.msec,"humanize"))+" ("+e._s(e.replayData.game.duration.formatted)+")")]),a("dt",[e._v("Start time")]),a("dd",[a("time",{attrs:{datetime:e.gameTimeISO.start,title:e.gameTimeISO.start}},[e._v(e._s(e._f("moment")(e.gameTimeISO.start,"dddd, MMMM Do YYYY [at] h:mm:ss a")))])]),a("dt",[e._v("Server name")]),a("dd",[e._v(e._s(e.replayData.server_name))])]),a("dl",{staticClass:"col-sm"},[a("dt",[e._v("Options")]),e._l(e.replayData.game.options,(function(t,n){return a("dd",{key:n,staticClass:"c-tab-game-info__option"},[e._v(" "+e._s(e._f("prettifyOptionName")(n))+": "+e._s(e._f("prettifyOptionValue")(t))+" ")])}))],2)])},Ne=[],Ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"c-mod-name"},[e._v(" "+e._s(e.modName)+" ")])},Le=[],Pe={props:{mod:{type:String,default:null}},computed:{modName:function(){return this.$store.getters["modData/modName"](this.mod)}}},ze=Pe,Be=Object(I["a"])(ze,Ae,Le,!1,null,null,null),Ve=Be.exports,Je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.map?a("div",{staticClass:"c-map-info"},[a("div",{staticClass:"c-map-info__minimap"},[a("a",{attrs:{href:"https://resource.openra.net/maps/"+e.map.id,title:"View on Resource Center",target:"_blank"}},[a("img",{staticClass:"c-map-info__minimap",attrs:{src:"data:image/png;base64,"+e.map.minimap,alt:"minimap"}})])]),a("small",{staticClass:"text-muted"},[e._v("Created by "+e._s(e.map.author))])]):e._e()},Ue=[],Ge={props:{hash:String},data:function(){return{map:null}},created:function(){var e=this;fetch("https://resource.openra.net/map/hash/"+this.hash).then((function(e){if(e.ok)return e.clone().json();throw new Error("Failed to fetch map data.")})).then((function(t){e.map=t[0]})).catch((function(e){console.log(e)}))}},He=Ge,We=Object(I["a"])(He,Je,Ue,!1,null,null,null),Xe=We.exports,Ye={components:{ModName:Ve,MapInfo:Xe},computed:{replayData:function(){return this.$store.state.replayData},gameTimeISO:function(){return this.$store.getters["replayData/gameTimeISO"]}},filters:{prettifyOptionName:function(e){var t=e.replace(/_/gi," ");return t},prettifyOptionValue:function(e){return!0===e?e="Yes":!1===e&&(e="No"),e}}},qe=Ye,Ke=(a("606c"),Object(I["a"])(qe,Me,Ne,!1,null,null,null)),Qe=Ke.exports,Ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-tab-clients"},e._l(e.teams,(function(t,n){return a("div",{key:n,staticClass:"c-tab-clients__team"},[a("span",{staticClass:"o-label c-tab-clients__team-name"},[a("TeamName",{attrs:{teamId:n}})],1),a("div",{staticClass:"row"},e._l(t,(function(e,t){return a("div",{key:t,staticClass:"c-tab-clients__client col-sm-2 mb-3"},[a("ClientInfo",{attrs:{client:e}})],1)})),0)])})),0)},et=[],tt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"c-team-name"},[e._v(e._s(e.name))])},at=[],nt={props:{teamId:{default:!1},player:{type:Object,required:!1}},computed:{team:function(){return this.teamId?this.teamId:this.player?this.player.team:null},name:function(){var e="",t=this.$store.state.replayData.game.type;return e="spectators"===this.team||this.player&&!this.player.is_player?"Spectators":null===this.team||"ffa"===this.team?"1v1"===t?"Players":"Free for All":"Team ".concat(this.team),e}}},rt=nt,st=Object(I["a"])(rt,tt,at,!1,null,null,null),it=st.exports,ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-client-info"},[a("h4",[e._v(e._s(e.client.name))]),a("Faction",{attrs:{faction:e.client.faction}}),a("div",{staticClass:"c-client-info__icons"},[e.client.is_player?a("span",{staticClass:"c-client-info__color is-help",style:{backgroundColor:"#"+e.client.color},attrs:{title:"Player color: #"+e.client.color}}):e._e(),e.client.is_player&&!e.client.is_bot?a("i",{staticClass:"material-icons is-help",attrs:{title:"Human Player"}},[e._v("person")]):e._e(),e.client.is_player&&e.client.is_bot?a("i",{staticClass:"material-icons is-help",attrs:{title:"AI Player"}},[e._v("computer")]):e._e(),e.client.is_player?e._e():a("i",{staticClass:"material-icons is-help",attrs:{title:"Spectator"}},[e._v("remove_red_eye")]),e.client.is_winner?a("i",{staticClass:"material-icons is-help",attrs:{title:"Winner"}},[e._v("stars")]):e._e()]),e.showTeam?a("span",{staticClass:"o-label"},[a("TeamName",{attrs:{player:e.client}})],1):e._e()],1)},lt=[],ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.faction.actual?a("span",{staticClass:"c-faction"},[a("span",{staticClass:"c-faction__name"},[e._v(e._s(e.actual.name))]),e._v(" "),e.faction.chosen!==e.faction.actual?a("small",{staticClass:"c-faction__chosen"},[e._v("("+e._s(e.chosen.name)+")")]):e._e()]):e._e()},ut=[],dt={props:{faction:Object,mod:{type:String,default:null}},computed:{actual:function(){return this.$store.getters["modData/factionInfo"](this.faction.actual,this.mod)},chosen:function(){return this.$store.getters["modData/factionInfo"](this.faction.chosen,this.mod)}}},pt=dt,mt=Object(I["a"])(pt,ct,ut,!1,null,null,null),ft=mt.exports,ht={props:{client:Object,showTeam:{type:Boolean,default:!1}},components:{Faction:ft,TeamName:it}},bt=ht,yt=(a("b1af"),Object(I["a"])(bt,ot,lt,!1,null,null,null)),gt=yt.exports,_t={computed:{teams:function(){return this.$store.getters["replayData/teams"]}},components:{TeamName:it,ClientInfo:gt}},vt=_t,jt=(a("73a3"),Object(I["a"])(vt,Ze,et,!1,null,null,null)),wt=jt.exports,Ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-tab-orders"},[a("FilterBuildOrders"),a("div",{staticClass:"c-tab-build-orders"},[a("div",{staticClass:"c-tab-build-orders__teams"},e._l(e.teams,(function(t,n){return a("div",{key:n,staticClass:"c-tab-build-orders__team"},e._l(t,(function(t,n){return a("div",{key:n,staticClass:"c-tab-build-orders__player"},[a("div",{staticClass:"c-tab-build-orders__client"},[t.is_player?a("ClientInfo",{attrs:{client:t,showTeam:!e.is1v1}}):e._e()],1)])})),0)})),0),"timeline"===e.buildOrderViewMode?a("BuildOrdersTimeline",{attrs:{teams:e.teams}}):"simple"===e.buildOrderViewMode?a("BuildOrdersSimple",{attrs:{teams:e.teams}}):"stats"===e.buildOrderViewMode?a("BuildOrdersStats",{attrs:{teams:e.teams}}):e._e()],1)],1)},St=[],Ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-filters mb-3 mt-1"},[a("small",{staticClass:"d-inline-block mr-2"},[e._v("View mode")]),a("b-btn-group",{attrs:{size:"sm"}},[a("b-btn",{attrs:{variant:"outline-primary",pressed:"simple"===e.buildOrderViewMode,value:"simple"},on:{click:function(t){return e.setViewMode(t)}}},[e._v("Simple")]),a("b-btn",{attrs:{variant:"outline-primary",pressed:"timeline"===e.buildOrderViewMode,value:"timeline"},on:{click:function(t){return e.setViewMode(t)}}},[e._v("Timeline")]),a("b-btn",{attrs:{variant:"outline-primary",pressed:"stats"===e.buildOrderViewMode,value:"stats"},on:{click:function(t){return e.setViewMode(t)}}},[e._v("Statistics")])],1),a("small",{staticClass:"d-inline-block mr-2 ml-5"},[e._v("Show")]),a("b-btn-group",{attrs:{size:"sm"}},[a("b-btn",{attrs:{variant:"outline-primary",pressed:"all"===e.buildOrderFilter,value:"all"},on:{click:function(t){return e.setFilters(t)}}},[e._v("Everything")]),e.modFeatures.includes("buildings")?a("b-btn",{attrs:{variant:"outline-primary",pressed:"building"===e.buildOrderFilter,value:"building"},on:{click:function(t){return e.setFilters(t)}}},[e._v("Buildings")]):e._e(),e.modFeatures.includes("defences")?a("b-btn",{attrs:{variant:"outline-primary",pressed:"defence"===e.buildOrderFilter,value:"defence"},on:{click:function(t){return e.setFilters(t)}}},[e._v("Defences")]):e._e(),e.modFeatures.includes("support_powers")?a("b-btn",{attrs:{variant:"outline-primary",pressed:"support_power"===e.buildOrderFilter,value:"support_power"},on:{click:function(t){return e.setFilters(t)}}},[e._v("Support Powers")]):e._e()],1)],1)},kt=[],Dt={computed:{buildOrderViewMode:function(){return this.$store.state.settings.buildOrderViewMode},buildOrderFilter:function(){return this.$store.state.settings.buildOrderFilter},modFeatures:function(){return this.$store.getters["modData/modFeatures"]()}},methods:{setViewMode:function(e){var t=e.target.value;this.$store.commit("settings/setBuildOrderViewMode",{mode:t})},setFilters:function(e){var t=e.target.value;this.$store.commit("settings/setBuildOrderFilter",{filter:t})}}},$t=Dt,xt=Object(I["a"])($t,Ct,kt,!1,null,null,null),Et=xt.exports,Rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-build-orders-simple"},e._l(e.teams,(function(t,n){return a("div",{key:n,staticClass:"c-build-orders-simple__team"},e._l(t,(function(t,n){return a("div",{key:n,staticClass:"c-build-orders-simple__player"},[a("div",{staticClass:"c-build-orders-simple__order"},e._l(e.mergeActors(t.build,t.support_powers),(function(e,t){return a("Actor",{key:e.actor_type+"-"+t,attrs:{id:e.actor_id,game_time:e.game_time,type:e.actor_type}})})),1)])})),0)})),0)},Tt=[],Ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.isFilteredIn,expression:"isFilteredIn"},{name:"b-popover",rawName:"v-b-popover.hover.focus.bottom",value:e.name,expression:"name",modifiers:{hover:!0,focus:!0,bottom:!0}}],class:["c-actor",e.typeClass,{"is-offset":e.isOffset,"has-error":e.hasCameoError}],attrs:{title:e.popoverTitle}},[a("img",{staticClass:"c-actor__cameo",attrs:{src:e.cameoUrl,alt:e.name,width:e.width,height:e.height},on:{error:function(t){return e.cameoError(t)}}}),e.badge?a("span",{staticClass:"c-actor__badge h4"},[a("b-badge",[e._v(e._s(e.badge))])],1):e._e()])},It=[],Mt=(a("a9e3"),{data:function(){return{hasCameoError:!1,isOffset:!1}},props:{id:{type:String,default:null},mod:{type:String,default:null},type:{type:String,default:"actor"},game_time:Object,width:{type:Number,default:64},badge:{type:Number,default:null}},mounted:function(){"timeline"===this.$store.state.settings.buildOrderViewMode&&this.unclump(this.$el)},computed:{height:function(){return.75*this.width},offset:function(){return!this.game_time||f.a.isEmpty(this.game_time)?"0px":this.game_time.msec*this.$store.state.settings.timelineScalingFactor+"px"},info:function(){return"support_power"===this.type?this.$store.getters["modData/supportPowerInfo"](this.id,this.mod):this.$store.getters["modData/actorInfo"](this.id,this.mod)},name:function(){return this.info.name},popoverTitle:function(){var e="";return this.game_time&&!f.a.isEmpty(this.game_time)&&(e=this.game_time.formatted),e},typeClass:function(){return"c-actor--".concat(this.info.type)},cameoUrl:function(){var e=this.$store.state.replayData.mod,t=this.info.id+".gif";return"support_power"===this.type&&(t="support_power-"+t),"./assets/mods/"+e+"/cameos/"+t},isFilteredIn:function(){var e=this.$store.state.settings.buildOrderFilter;return"all"===e||this.info.type===e}},methods:{unclump:function(e){e.classList.add("is-offset"),this.isOffset=!0,e.style.left=this.offset;var t=e.previousSibling;if(t){var a=e.getBoundingClientRect(),n=t.getBoundingClientRect();if(!(a.left>=n.right||a.bottom<=n.top)){var r=n.top-a.top,s=r+n.height;e.style.top=s+"px"}}},cameoError:function(){this.hasCameoError=!0}}}),Nt=Mt,At=(a("ac51"),Object(I["a"])(Nt,Ft,It,!1,null,null,null)),Lt=At.exports,Pt={props:{teams:{type:Object,required:!0}},components:{Actor:Lt},methods:{mergeActors:function(e,t){return V.mergeActors(e,t)}}},zt=Pt,Bt=(a("7ff9"),Object(I["a"])(zt,Rt,Tt,!1,null,null,null)),Vt=Bt.exports,Jt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"timeline",staticClass:"c-build-orders-timeline",on:{mousemove:function(t){return e.onTimelineEvent(t)},scroll:function(t){return e.onTimelineEvent(t)}}},[e._l(e.teams,(function(t,n){return a("div",{key:n,staticClass:"c-build-orders-timeline__team"},e._l(t,(function(t,n){return a("div",{key:n,staticClass:"c-build-orders-timeline__player"},[a("div",{staticClass:"c-build-orders-timeline__order",style:{width:e.timelineSize+"px"}},[e.isBuildOrderTabActive?a("div",{staticClass:"c-build-orders-timeline__actor"},e._l(e.mergeActors(t.build,t.support_powers),(function(e,t){return a("Actor",{key:e.actor_type+"-"+t,attrs:{id:e.actor_id,game_time:e.game_time,type:e.actor_type}})})),1):e._e()])])})),0)})),a("div",{ref:"veil",staticClass:"c-build-orders-timeline__veil-wrap"},[a("div",{staticClass:"c-build-orders-timeline__veil"})]),a("div",{ref:"playhead",staticClass:"c-build-orders-timeline__playhead",attrs:{"current-time":"00:00:00"}})],2)},Ut=[],Gt=a("c1df"),Ht=a.n(Gt),Wt={data:function(){return{isTimelineScrolling:!1,offsetX:0,mouseX:0}},props:{teams:{type:Object,required:!0}},computed:{timelineSize:function(){return this.$store.getters["settings/timelineSize"]},timelineScalingFactor:function(){return this.$store.state.settings.timelineScalingFactor},isBuildOrderTabActive:function(){return 2===this.$store.state.settings.currentTab}},methods:{mergeActors:function(e,t){return V.mergeActors(e,t)},onTimelineEvent:function(e){var t=this.$refs.timeline,a=t.getBoundingClientRect();if(e.clientX){var n=e.clientX-a.left;this.mouseX=n<0?0:n}this.offsetX=this.mouseX+t.scrollLeft,this.timelineAnimation()},timelineAnimation:function(){var e=this;this.isTimelineScrolling||(this.isTimelineScrolling=!0,window.requestAnimationFrame((function(){e.offsetX<=e.timelineSize&&e.updateTimeline(),e.isTimelineScrolling=!1})))},updateTimeline:function(){var e=this.$refs.playhead,t=this.$refs.veil,a=Math.round(this.offsetX/this.timelineScalingFactor);a=Ht.a.utc(a).format("HH:mm:ss"),e.style.transform="translateX(".concat(this.offsetX,"px)"),e.setAttribute("current-time",a),t.style.transform="translateX(".concat(this.offsetX,"px)")}},components:{Actor:Lt}},Xt=Wt,Yt=(a("daf4"),Object(I["a"])(Xt,Jt,Ut,!1,null,null,null)),qt=Yt.exports,Kt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-build-orders-stats"},e._l(e.teams,(function(t,n){return a("div",{key:n,staticClass:"c-build-orders-stats__team"},e._l(t,(function(t,n){return a("div",{key:n,staticClass:"c-build-orders-stats__player"},[a("div",{staticClass:"c-build-orders-stats__order"},[e._l(e.buildings,(function(n){return a("div",{key:"structure-"+n.id},[e.count_structures(n.id,t.build)?a("Actor",{attrs:{id:n.id,badge:e.count_structures(n.id,t.build)}}):e._e()],1)})),e._l(e.defences,(function(n){return a("div",{key:"defence-"+n.id},[e.count_structures(n.id,t.build)?a("Actor",{attrs:{id:n.id,badge:e.count_structures(n.id,t.build)}}):e._e()],1)})),e._l(e.support_powers,(function(n){return a("div",{key:"support_power-"+n.id},[e.count_support_powers(n.id,t.support_powers)?a("Actor",{attrs:{id:n.id,badge:e.count_support_powers(n.id,t.support_powers),type:"support_power"}}):e._e()],1)}))],2)])})),0)})),0)},Qt=[],Zt={props:{teams:{type:Object,required:!0}},computed:{buildings:function(){return this.$store.getters["modData/buildings"]},defences:function(){return this.$store.getters["modData/defences"]},support_powers:function(){return this.$store.getters["modData/support_powers"]}},methods:{count_structures:function(e,t){return f.a.filter(t,["structure",e]).length},count_support_powers:function(e,t){return f.a.filter(t,["type",e]).length}},components:{Actor:Lt}},ea=Zt,ta=(a("b685"),Object(I["a"])(ea,Kt,Qt,!1,null,null,null)),aa=ta.exports,na={computed:{is1v1:function(){return"1v1"===this.$store.state.replayData.game.type},teams:function(){return this.$store.getters["replayData/players"]},buildOrderViewMode:function(){return this.$store.state.settings.buildOrderViewMode}},components:{FilterBuildOrders:Et,ClientInfo:gt,BuildOrdersSimple:Vt,BuildOrdersTimeline:qt,BuildOrdersStats:aa}},ra=na,sa=(a("3ded"),Object(I["a"])(ra,Ot,St,!1,null,null,null)),ia=sa.exports,oa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-chat"},[a("FilterChat"),e._l(e.chat,(function(e,t){return a("ChatMessage",{key:t,attrs:{message:e}})}))],2)},la=[],ca=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-filters mb-3 mt-1"},[a("small",{staticClass:"d-inline-block mr-2"},[e._v("Channels")]),a("b-btn-group",{attrs:{size:"sm"}},[a("b-btn",{attrs:{variant:"outline-primary",pressed:e.chatFilter.includes("all"),value:"all"},on:{click:function(t){return e.setFilters(t)}}},[e._v("Show All")]),e._l(e.channels,(function(t,n){return a("b-btn",{key:n,attrs:{variant:"outline-primary",pressed:e.chatFilter===t||!t&&"spectators"===e.chatFilter,value:t||"spectators"},on:{click:function(t){return e.setFilters(t)}}},[e._v("#"+e._s(t||"spectators"))])}))],2)],1)},ua=[],da={computed:{channels:function(){return this.$store.getters["replayData/chatChannels"]},chatFilter:function(){return this.$store.state.settings.chatFilter}},methods:{setFilters:function(e){var t=e.target.value;this.$store.commit("settings/setChatFilter",{filter:t})}}},pa=da,ma=Object(I["a"])(pa,ca,ua,!1,null,null,null),fa=ma.exports,ha=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.isFilteredIn,expression:"isFilteredIn"}],staticClass:"c-chat-message",class:{"is-server":e.isServer,"is-spectator":e.isSpectator}},[a("small",{staticClass:"c-chat-message__channel"},[e._v("#"+e._s(e.channel)+" ")]),a("span",{staticClass:"c-chat-message__name"},[a("strong",[e._v(e._s(e.name))]),e._v(": ")]),a("span",{staticClass:"c-chat-message__message"},[e._v(e._s(e.message.message))])])},ba=[],ya=(a("caad"),a("2532"),{props:{message:Object},computed:{name:function(){return this.message.name||"Battlefield Control"},channel:function(){return this.message.channel||"spectators"},isServer:function(){return"server"===this.message.channel&&null===this.message.name},isSpectator:function(){return null===this.message.channel},isFilteredIn:function(){var e=this.$store.state.settings.chatFilter;return e.includes("all")||e.includes(this.channel)}}}),ga=ya,_a=(a("3142"),Object(I["a"])(ga,ha,ba,!1,null,null,null)),va=_a.exports,ja={computed:{chat:function(){return this.$store.getters["replayData/chat"]}},components:{FilterChat:fa,ChatMessage:va}},wa=ja,Oa=Object(I["a"])(wa,oa,la,!1,null,null,null),Sa=Oa.exports,Ca={components:{TabGameInfo:Qe,TabClients:wt,TabBuildOrders:ia,TabChat:Sa},methods:{onTabActivated:function(e){this.$store.commit("settings/setCurrentTab",e)}}},ka=Ca,Da=Object(I["a"])(ka,Fe,Ie,!1,null,null,null),$a=Da.exports,xa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-jumbotron",[a("h1",{staticClass:"display-4"},[e._v(e._s(e.versus))]),a("p",{staticClass:"lead"},[e._v('on "'+e._s(e.map.name)+'" in '),a("ModName")],1)])},Ea=[],Ra={components:{ModName:Ve},computed:{modName:function(){return this.$store.getters["modData/modName"]()},map:function(){return this.$store.state.replayData.map},versus:function(){return this.$store.getters["replayData/versus"]}},created:function(){document.title="".concat(this.versus,' on "').concat(this.map.name,'" in ').concat(this.modName," | ").concat(this.$store.state.settings.appName)}},Ta=Ra,Fa=Object(I["a"])(Ta,xa,Ea,!1,null,null,null),Ia=Fa.exports,Ma={components:{Header:Ia,Analytics:$a}},Na=Ma,Aa=Object(I["a"])(Na,Re,Te,!1,null,null,null),La=Aa.exports,Pa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex align-items-center justify-content-center min-vh-100 text-center"},[a("HashDataResolver",{attrs:{hash:e.$route.params.hash,source:e.$route.params.source}}),a("Submit",{attrs:{isButton:!1,defaultLabel:""}})],1)},za=[],Ba=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-alert",{attrs:{variant:"danger",dismissible:"",show:e.hasError}},[e._v(" "+e._s(e.errorMessage)+" ")])},Va=[],Ja={props:{hash:{type:String,default:null},source:{type:String,default:null}},data:function(){return{hasError:!1,errorMessage:null,replayJSON:null}},created:function(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData:function(){var e=this;this.clearError(),this.source&&this.hash&&(this.$store.commit("settings/setLoadingState",!0),setTimeout((function(){fetch("".concat("https://openra-api.com/replays/data","/").concat(e.source,"/").concat(e.hash)).then((function(e){if(e.ok)return e.json();throw new Error("Failed to fetch data from openra-api.com (".concat(e.status," ").concat(e.statusText,")"))})).then((function(t){e.replayJSON=V.cleanUpBuild(t),e.replayDataReady()})).catch((function(t){e.setError(t),e.$store.commit("settings/setLoadingState",!1)}))}),0))},replayDataReady:function(){B.$emit("ReplayDataReady",this.replayJSON),this.$storageManager.storeReplay(this.replayJSON)},setError:function(e){this.hasError=!0,this.errorMessage="".concat(e.name,": ").concat(e.message)},clearError:function(){this.hasError=!1,this.errorMessage=null}}},Ua=Ja,Ga=Object(I["a"])(Ua,Ba,Va,!1,null,null,null),Ha=Ga.exports,Wa={components:{Submit:ee,HashDataResolver:Ha}},Xa=Wa,Ya=Object(I["a"])(Xa,Pa,za,!1,null,null,null),qa=Ya.exports;n["default"].use(D["a"]);var Ka=[{path:"/analyze",name:"analyze",component:La,beforeEnter:function(e,t,a){k.state.settings.isAnalyticsReady||a("/"),a()}},{path:"/:source(oraladder|ragl)/:hash",component:qa},{path:"*",component:Ee}],Qa=new D["a"]({routes:Ka}),Za=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex flex-column min-vh-100",attrs:{id:"app"}},[a("Navbar"),a("div",{staticClass:"container-fluid my-5 flex-grow-1"},[a("router-view")],1),a("Footer")],1)},en=[],tn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-navbar",{attrs:{variant:"dark",type:"dark"}},[a("b-navbar-brand",[a("img",{staticClass:"d-inline-block align-top",attrs:{src:e.iconUrl,alt:""}}),e._v(" "+e._s(e.headerText)+" ")]),a("b-navbar-nav",{staticClass:"ml-auto"},[e.isAnalyticsReady?a("new-replay-button"):e._e()],1)],1)},an=[],nn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-btn",{attrs:{type:"button",variant:"outline-primary",size:"sm"},on:{click:e.onClick}},[e._v(" Load New Replay ")])},rn=[],sn={methods:{onClick:function(){this.$replayDataManager.loadNewReplay()}}},on=sn,ln=Object(I["a"])(on,nn,rn,!1,null,null,null),cn=ln.exports,un={components:{NewReplayButton:cn},computed:{iconUrl:function(){return this.$store.state.settings.iconUrl},headerText:function(){return this.$store.state.settings.appName},isAnalyticsReady:function(){return this.$store.state.settings.isAnalyticsReady}},methods:{loadNewReplay:function(){location.reload()}}},dn=un,pn=Object(I["a"])(dn,tn,an,!1,null,null,null),mn=pn.exports,fn=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},hn=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("footer",{staticClass:"c-footer text-muted text-right"},[a("div",{staticClass:"container-fluid p-3"},[a("p",[e._v("glhf by "),a("a",{attrs:{href:"https://github.com/dragunoff/"}},[e._v("dragunoff")]),e._v(", hosted on "),a("a",{attrs:{href:"https://github.com/dragunoff/OpenRA-replay-analytics"}},[e._v("github")])])])])}],bn=(a("53d7"),{}),yn=Object(I["a"])(bn,fn,hn,!1,null,null,null),gn=yn.exports,_n={name:"app",components:{Navbar:mn,Footer:gn}},vn=_n,jn=(a("c796"),Object(I["a"])(vn,Za,en,!1,null,null,null)),wn=jn.exports;a("ab8b"),a("2dd8"),a("a434");function On(){var e=[];if(localStorage.getItem("storedReplays"))try{e=JSON.parse(localStorage.getItem("storedReplays"))}catch(r){localStorage.removeItem("storedReplays")}function t(t){t&&(e.unshift({versus:k.getters["replayData/versus"],modName:k.getters["modData/modName"](t.mod),timestamp:Date.now(),data:t}),n())}function a(t){e.splice(t,1),n()}function n(){localStorage.setItem("storedReplays",JSON.stringify(e))}return{storedReplays:e,storeReplay:t,deleteReplay:a}}a("4160"),a("a15b"),a("159b");var Sn={},Cn={gameTimeISO:function(e){var t={};return t.start=e.game.start_time,t.end=e.game.end_time,t},teams:function(e){var t={},a=e.clients;return f.a.forEach(a,(function(e){var a=V.getClientTeam(e);Object.prototype.hasOwnProperty.call(t,a)||(t=Object.defineProperty(t,a,{value:[],enumerable:!0}))})),f.a.forEach(a,(function(e){var a=V.getClientTeam(e);t[a].push(e)})),t},versus:function(e,t){var a=t.teams,n="";return f.a.forEach(a,(function(e,t){if("spectators"!==t){n=n?"".concat(n," VS "):"";var a,r=f.a.map(e,"name"),s=", ";"ffa"===t?s=" VS ":r.length>2&&(a=r.pop()),n+=r.join(s),a&&(n=n+" & "+a)}})),n},players:function(e,t){return f.a.omit(t.teams,"spectators")},spectators:function(e){return f.a.filter(e.clients,{is_player:!1})},chat:function(e){return e.chat},chatChannels:function(e){var t=e.chat,a=[];return f.a.forEach(t,(function(e){f.a.forOwn(e,(function(e,t){"channel"===t&&(null!==e||a.includes("spectators")||(e="spectators"),a.includes(e)||a.push(e))}))})),f.a.compact(a)}},kn={},Dn={},$n={namespaced:!0,state:Sn,getters:Cn,actions:kn,mutations:Dn};function xn(){function e(e){a(e),k.commit("settings/setCurrentMod",e.mod),k.commit("settings/setAnalyticsReadyState",!0),k.commit("settings/setLoadingState",!1),Qa.push({name:"analyze"})}function t(){n(),k.commit("settings/setAnalyticsReadyState",!1),Qa.push("/")}function a(e){k.hasModule("replayData")||($n.state=e,k.registerModule("replayData",$n))}function n(){k.hasModule("replayData")&&k.unregisterModule("replayData")}return B.$on("ReplayDataReady",e),{loadNewReplay:t}}n["default"].config.productionTip=!1,n["default"].use(r["a"]),n["default"].use(i.a),n["default"].prototype.$storageManager=On(),n["default"].prototype.$replayDataManager=xn(),new n["default"]({el:"#app",store:k,router:Qa,render:function(e){return e(wn)}})},5872:function(e,t,a){},"606c":function(e,t,a){"use strict";var n=a("0384"),r=a.n(n);r.a},"66d0":function(e){e.exports=JSON.parse('{"name":"","features":[],"factions":{},"actors":{}}')},"6b1a":function(e,t,a){},"6e63":function(e,t,a){"use strict";var n=a("0ce6"),r=a.n(n);r.a},"73a3":function(e,t,a){"use strict";var n=a("8b5f"),r=a.n(n);r.a},"7c50":function(e){e.exports=JSON.parse('{"name":"Dune 2000","features":["icon"],"factions":{},"actors":{}}')},"7ff9":function(e,t,a){"use strict";var n=a("6b1a"),r=a.n(n);r.a},8837:function(e,t,a){"use strict";var n=a("5872"),r=a.n(n);r.a},"8b5f":function(e,t,a){},"956c":function(e){e.exports=JSON.parse('{"name":"Red Alert","features":["icon","factions","buildings","defences","support_powers"],"factions":{"random":{"id":"random","name":"Random"},"allies":{"id":"allies","name":"Allies"},"randomallies":{"id":"randomallies","name":"Random Allies"},"england":{"id":"england","name":"England"},"france":{"id":"france","name":"France"},"germany":{"id":"germany","name":"Germany"},"soviet":{"id":"soviet","name":"Soviet"},"randomsoviet":{"id":"randomsoviet","name":"Random Soviet"},"russia":{"id":"russia","name":"Russia"},"ukraine":{"id":"ukraine","name":"Ukraine"}},"actors":{"fact":{"id":"fact","type":"mcv","name":"Construction Yard"},"powr":{"id":"powr","type":"building","name":"Power Plant"},"apwr":{"id":"apwr","type":"building","name":"Advanced Power Plant"},"proc":{"id":"proc","type":"building","name":"Ore Refinery"},"barr":{"id":"barr","type":"building","name":"Soviet Barracks"},"kenn":{"id":"kenn","type":"building","name":"Kennel"},"tent":{"id":"tent","type":"building","name":"Allied Barracks"},"spen":{"id":"spen","type":"building","name":"Sub Pen"},"syrd":{"id":"syrd","type":"building","name":"Ship Yard"},"fix":{"id":"fix","type":"building","name":"Service Depot"},"weap":{"id":"weap","type":"building","name":"War Factory"},"dome":{"id":"dome","type":"building","name":"Radar Dome"},"hpad":{"id":"hpad","type":"building","name":"Helipad"},"afld":{"id":"afld","type":"building","name":"Airfield"},"afld.ukraine":{"id":"afld.ukraine","type":"building","name":"Airfield (Ukraine)"},"atek":{"id":"atek","type":"building","name":"Allied Tech Center"},"stek":{"id":"stek","type":"building","name":"Soviet Tech Center"},"silo":{"id":"silo","type":"defence","name":"Silo"},"sbag":{"id":"sbag","type":"defence","name":"Sandbag Wall"},"fenc":{"id":"fenc","type":"defence","name":"Wire Fence"},"brik":{"id":"brik","type":"defence","name":"Concrete Wall"},"cycl":{"id":"cycl","type":"defence","name":"Chain-Link Barrier"},"barb":{"id":"barb","type":"defence","name":"Barbed-Wire Fence"},"wood":{"id":"wood","type":"defence","name":"Wooden Fence"},"pbox":{"id":"pbox","type":"defence","name":"Pillbox"},"hbox":{"id":"hbox","type":"defence","name":"Camo Pillbox"},"gun":{"id":"gun","type":"defence","name":"Turret"},"agun":{"id":"agun","type":"defence","name":"AA Gun"},"gap":{"id":"gap","type":"defence","name":"Gap Generator"},"ftur":{"id":"ftur","type":"defence","name":"Flame Tower"},"tsla":{"id":"tsla","type":"defence","name":"Tesla Coil"},"sam":{"id":"sam","type":"defence","name":"SAM Site"},"iron":{"id":"iron","type":"defence","name":"Iron Curtain"},"pdox":{"id":"pdox","type":"defence","name":"Chronosphere"},"mslo":{"id":"mslo","type":"defence","name":"Missile Silo"},"fpwr":{"id":"fpwr","type":"defence","name":"Fake Power Plant"},"syrf":{"id":"syrf","type":"defence","name":"Fake Naval Yard"},"spef":{"id":"spef","type":"defence","name":"Fake Sub Pen"},"weaf":{"id":"weaf","type":"defence","name":"Fake War Factory"},"domf":{"id":"domf","type":"defence","name":"Fake Radar Dome"},"fixf":{"id":"fixf","type":"defence","name":"Fake Service Depot"},"fapw":{"id":"fapw","type":"defence","name":"Fake Advanced Power Plant"},"atef":{"id":"atef","type":"defence","name":"Fake Allied Tech Center"},"pdof":{"id":"pdof","type":"defence","name":"Fake Chronosphere"},"mslf":{"id":"mslf","type":"defence","name":"Fake Missile Silo"},"facf":{"id":"facf","type":"defence","name":"Fake Construction Yard"}},"support_powers":{"iron_curtain":{"id":"iron_curtain","type":"support_power","name":"Iron Curtain"},"chronoshift":{"id":"chronoshift","type":"support_power","name":"Chronoshift"},"parabombs":{"id":"parabombs","type":"support_power","name":"Parabombs"},"paratroopers":{"id":"paratroopers","type":"support_power","name":"Paratroopers"},"spy_plane":{"id":"spy_plane","type":"support_power","name":"Spy Plane"},"nuke":{"id":"nuke","type":"support_power","name":"Atom Bomb"},"sonarpulse":{"id":"sonarpulse","type":"support_power","name":"Sonar Pulse"}}}')},"9b67":function(e,t,a){},"9dc7":function(e){e.exports=JSON.parse('{"name":"Tiberian Sun","features":["icon","factions"],"factions":{"random":{"id":"random","name":"Random"},"gdi":{"id":"gdi","name":"GDI"},"nod":{"id":"nod","name":"Nod"}},"actors":{}}')},a5fe:function(e,t,a){},ac51:function(e,t,a){"use strict";var n=a("a5fe"),r=a.n(n);r.a},b1af:function(e,t,a){"use strict";var n=a("fe9f"),r=a.n(n);r.a},b685:function(e,t,a){"use strict";var n=a("06a0"),r=a.n(n);r.a},c796:function(e,t,a){"use strict";var n=a("07a7"),r=a.n(n);r.a},daf4:function(e,t,a){"use strict";var n=a("3bea"),r=a.n(n);r.a},ef72:function(e,t,a){"use strict";var n=a("f95b"),r=a.n(n);r.a},f95b:function(e,t,a){},fb90:function(e){e.exports=JSON.parse('{"name":"Tiberian Dawn","features":["icon","factions","buildings","defences","support_powers"],"factions":{"random":{"id":"rangom","name":"Random"},"gdi":{"id":"gdi","name":"GDI"},"nod":{"id":"nod","name":"Nod"}},"actors":{"fact":{"id":"fact","type":"mcv","name":"Construction Yard"},"fact.gdi":{"id":"fact.gdi","type":"mcv","name":"Construction Yard (GDI)"},"fact.nod":{"id":"fact.nod","type":"mcv","name":"Construction Yard (Nod)"},"nuke":{"id":"nuke","type":"building","name":"Power Plant"},"nuk2":{"id":"nuk2","type":"building","name":"Advanced Power Plant"},"proc":{"id":"proc","type":"building","name":"Tiberium Refinery"},"pyle":{"id":"pyle","type":"building","name":"Barracks"},"hand":{"id":"hand","type":"building","name":"Hand of Nod"},"afld":{"id":"afld","type":"building","name":"Airstrip"},"weap":{"id":"weap","type":"building","name":"Weapons Factory"},"hpad":{"id":"hpad","type":"building","name":"Helipad"},"fix":{"id":"fix","type":"building","name":"Repair Facility"},"hq":{"id":"hq","type":"building","name":"Communications Center"},"eye":{"id":"eye","type":"building","name":"Advanced Communications Center"},"tmpl":{"id":"tmpl","type":"building","name":"Temple of Nod"},"silo":{"id":"silo","type":"defence","name":"Tiberium Silo"},"sbag":{"id":"sbag","type":"defence","name":"Sandbag Wall"},"fenc":{"id":"fenc","type":"defence","name":"Wire Fence"},"brik":{"id":"brik","type":"defence","name":"Concrete Wall"},"cycl":{"id":"cycl","type":"defence","name":"Chain-Link Barrier"},"barb":{"id":"barb","type":"defence","name":"Barbed-Wire Fence"},"wood":{"id":"wood","type":"defence","name":"Wooden Fence"},"gtwr":{"id":"gtwr","type":"defence","name":"Guard Tower"},"atwr":{"id":"atwr","type":"defence","name":"Advanced Guard Tower"},"gun":{"id":"gun","type":"defence","name":"Turret"},"sam":{"id":"sam","type":"defence","name":"SAM Site"},"obli":{"id":"obli","type":"defence","name":"Obelisk of Light"}},"support_powers":{"airstrike":{"id":"airstrike","type":"support_power","name":"Air Strike"},"ion_cannon":{"id":"ion_cannon","type":"support_power","name":"Ion Cannon"},"nuke":{"id":"nuke","type":"support_power","name":"Nuclear Strike"}}}')},fe9f:function(e,t,a){}});
//# sourceMappingURL=app.7247c4e9.js.map